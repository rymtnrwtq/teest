(()=>{"use strict";const t={inCubic:(t,i,s,a)=>s*(t/=a)*t*t+i,outCubic:(t,i,s,a)=>(t/=a,s*(--t*t*t+1)+i),inOutCubic:(t,i,s,a)=>(t/=a/2)<1?s/2*t*t*t+i:s/2*((t-=2)*t*t+2)+i,inBack:(t,i,s,a,h)=>s*(t/=a)*t*(((h=h||1.70158)+1)*t-h)+i};class i{constructor(t=0,i=0){this.x=t,this.y=i}}class s{constructor(t,i,s,a,h){this.ctx=t,this.p0=i,this.p1=s,this.p2=a,this.p3=h,this.r=0,this.sy=0,this.x=0,this.y=0,this.time=0,this.duration=3+Number(Math.random()),this.color=`#${Math.floor(16777215*Math.random()).toString(16)}`,this.w=8,this.h=6,this.complete=!1}update(){this.time=Math.min(this.duration,this.time+1/60);const s=t.outCubic(this.time,.0125,1,this.duration),a=function(t,s,a,h,e){const n=new i,c=1-e;return n.x=c*c*c*t.x+3*c*c*e*s.x+3*c*e*e*a.x+e*e*e*h.x,n.y=c*c*c*t.y+3*c*c*e*s.y+3*c*e*e*a.y+e*e*e*h.y,n}(this.p0,this.p1,this.p2,this.p3,s),h=a.x-this.x,e=a.y-this.y;this.r=Math.atan2(e,h)+.5*Math.PI,this.sy=Math.sin(Math.PI*s*10),this.x=a.x,this.y=a.y,this.complete=this.time===this.duration}draw(){this.ctx.save(),this.ctx.translate(this.x,this.y),this.ctx.rotate(this.r),this.ctx.scale(1,this.sy),this.ctx.fillStyle=this.color,this.ctx.fillRect(.5*-this.w,.5*-this.h,this.w,this.h),this.ctx.restore()}}class a{constructor(t,i,s){this.canvas=t,this.width=i,this.height=s,this.particles=[],this.particles=[],this.ctx=t.getContext("2d"),this.canvas.width=i,this.canvas.height=s}start(t){this.canvas.style.display="block",this.particles.length=0,this.createParticles(t),this.animate()}animate(){requestAnimationFrame(this.loop.bind(this))}createParticles(t=0){for(let a=0;a<128;a++){const a=new i(.5*this.width,.5*this.height+t),h=new i(Math.random()*this.width,Math.random()*this.height),e=new i(Math.random()*this.width,Math.random()*this.height),n=new i(Math.random()*this.width,this.height+64);this.particles.push(new s(this.ctx,a,h,e,n))}}update(){this.particles.forEach((t=>{t.update()}))}draw(){this.ctx.clearRect(0,0,this.width,this.height),this.particles.forEach((t=>{t.draw()}))}loop(){this.update(),this.draw(),this.checkParticlesComplete()?(this.particles.length=0,this.canvas.style.display="none"):this.animate()}checkParticlesComplete(){for(let t=0;t<this.particles.length;t++)if(!1===this.particles[t].complete)return!1;return!0}}class h{constructor(){this.canvasWidth=600,this.canvasHeight=600,this.setUpButtons()}setUpButtons(){this.setUpButtonLink(),this.setUpFormSubmit()}setUpButtonLink(){document.querySelectorAll('[data-button-animation-enabled="buttonLink"]').forEach((t=>{t.classList.contains("button-animation-enabled")||(t.classList.add("button-animation-enabled"),this.addEffect(t,!1))}))}setUpFormSubmit(){document.querySelectorAll('input[data-button-animation-enabled="buttonSubmit"]').forEach((t=>{t.classList.contains("button-animation-enabled")||(t.classList.add("button-animation-enabled"),this.addEffect(t,!0))}))}addEffect(t,i){const s=this.canvasWidth,h=this.canvasHeight,e={canvas:null,celebrationCanvas:null},n=()=>{if(!e.canvas){const i=t.offsetParent;if(i){const t=document.createElement("canvas");t.width=s,t.height=h,t.addEventListener("click",(t=>{t.stopPropagation()})),i.appendChild(t),e.canvas=t}}return e.canvas},c=n();c&&this.positionCanvas(c,t);const o=()=>{const i=n();if(i){e.celebrationCanvas||(e.celebrationCanvas=new a(i,s,h));const n=this.positionCanvas(i,t);e.celebrationCanvas.start(n)}};i?t.form.addEventListener("submit",o):t.addEventListener("click",o)}positionCanvas(t,i){const s=i.getBoundingClientRect(),a=document.body,h=document.documentElement,e=Math.max(a.scrollHeight,a.offsetHeight,h.clientHeight,h.scrollHeight,h.offsetHeight)-window.scrollY-(s.top+s.height/2),n=e<this.canvasHeight/2?this.canvasHeight/2-e:0,c=-this.canvasWidth/2+s.width/2+i.offsetLeft,o=-this.canvasHeight/2+s.height/2+i.offsetTop-n,r=`\n            display: none;\n            width: ${this.canvasHeight}px;\n            height: ${this.canvasWidth}px;\n            position: absolute;\n            left: ${c}px;\n            top: ${o}px;\n            z-index:100;\n          `;return t.style.cssText=r,n}}window.tbClickAnimation={create:()=>new h}})();